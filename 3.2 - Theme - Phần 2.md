# THEME - PHáº¦N 2

## 1. POST TYPES

Trong Wordpress, cÃ¡c bÃ i cÃ³ cÃ¡c kiá»ƒu ná»™i dung khÃ¡c nhau, nháº±m má»¥c Ä‘Ã­ch phÃ¢n loáº¡i, quáº£n lÃ½ cÃ¡c kiá»ƒu ná»™i dung theo nhá»¯ng hÆ°á»›ng khÃ¡c nhau.

VÃ­ dá»¥: bÃ i viáº¿t cÃ³ kiá»ƒu 'post' thÆ°á»ng sá»­ dá»¥ng cho blog, cÃ²n bÃ i viáº¿t kiá»ƒu 'page' thÆ°á»ng sá»­ dá»¥ng cho cÃ¡c trang tÄ©nh (trang home/about)...


â– **CÃ¡c loáº¡i post type máº·c Ä‘á»‹nh**

- Post (Post Type: 'post')
- Page (Post Type: 'page')
- Attachment (Post Type: 'attachment')
- Revision (Post Type: 'revision')
- Navigation menu (Post Type: 'nav_menu_item')
- Block templates (Post Type: 'wp_template')
- Template parts (Post Type: 'wp_template_part')


âœ± **Post**

Post sá»­ dá»¥ng Ä‘á»ƒ viáº¿t cÃ¡c bÃ i viáº¿t cÃ³ ná»™i dung blog, sá»± kiá»‡n, tin tá»©c... Ä‘Æ°á»£c phÃ¢n loáº¡i bÄƒfng category vÃ  tags.
Post thÆ°á»ng Ä‘Æ°á»£c chÃº trá»ng báº±ng ná»™i dung vÃ  SEO.

+ ÄÆ°á»£c phÃ¢n loáº¡i theo taxonomies - máº·c Ä‘á»‹nh lÃ  categories vÃ  tags trong bÃ i viáº¿t.
+ Há»— trá»£ lÆ°u time stamp, cÃ³ nghÄ©a há»— trá»£ hiá»ƒn thá»‹ bÃ i viáº¿t theo permalink date vÃ  time stamp.
+ Hiá»ƒn thá»‹ ra template home (trang blog) theo thá»© tá»± ngÆ°á»£c theo thá»i gian, bÃ i post má»›i nháº¥t hiá»ƒn thá»‹ ra trÆ°á»›c.
+ ÄÆ°á»£c sÆ° dá»¥ng Ä‘á»ƒ táº¡o cÃ¡c feeds.


âœ± **Page**

Page Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº¡o cÃ¡c trang cÃ³ ná»™i dung cá»‘ Ä‘á»‹nh, cÃ³ yáº¿u tá»‘ chung chung, Ã­t thay Ä‘á»•i.
Page Ä‘Æ°á»£c phÃ¢n loáº¡i theo cáº¥u trÃºc phÃ¢n cáº¥p cha/con (hierarchical structure) vÃ  thá»© tá»± Ä‘á»ƒ sáº¯p xáº¿p vá»‹ trÃ­ cá»§a cÃ¡c trang.

+ ÄÆ°á»£c phÃ¢n loáº¡i theo cáº¥u trÃºc phÃ¢n cáº¥p cha/con vÃ  thá»© tá»±.
+ KhÃ´ng há»— trá»£ tá»• chá»©c báº±ng taxonomies - cá»¥ thá»ƒ lÃ  categories hoáº·c tags. 
+ KhÃ´ng phá»¥ thuá»™c vÃ o time stamp.
+ Há»— trá»£ Ã¡p dá»¥ng Page Template.


âœ± **Attachment**

Attachment thÆ°á»ng sá»­ dá»¥ng cho kiá»ƒu ná»™i dung lÃ  hÃ¬nh áº£nh hoáº·c media. CÃ³ nhá»¯ng Ä‘áº·c Ä‘iá»ƒm sau:

+ Chá»©a thÃ´ng tin cá»§a táº­p tin nhÆ° tÃªn, miÃªu táº£ ...
+ Äá»‘ vá»›i hÃ¬nh áº£nh, cÃ²n bao gá»“m thÃ´ng tin metadata Ä‘Æ°á»£c lÆ°u trá»¯ trong db wp_postmeta


âœ± **Custom Post Type**

ThÆ°á»ng sá»­ dá»¥ng khi muá»‘n thÃªm 1 kiá»ƒu ná»™i dung custom khÃ¡c trong site, Ä‘á»ƒ dá»… quáº£n lÃ½ vÃ  kiá»ƒm soÃ¡t dá»… dÃ ng.
Kiá»ƒu ná»™i dung custom post type cÃ³ Ä‘áº·c Ä‘iá»ƒm giá»‘ng vá»›i kiá»ƒu 'post' nhÆ°ng khÃ´ng há»— trá»£ há»‡ thá»‘ng category/tags.


## 2. Cáº¤U TRÃšC PHÃ‚N Cáº¤P TEMPLATE

Template files trong Wordpress Ä‘Æ°á»£c thiáº¿t káº¿ theo dáº¡ng mÃ´-Ä‘un, tÃ¡i sá»­ dá»¥ng, Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº¡o ra cÃ¡c trang web trÃªn.
CÃ³ template Ä‘Æ°á»£c sá»­ dá»¥ng trong cÃ¡c template khÃ¡c (template partial), vÃ  cÃ³ nhá»¯ng template sá»­ dá»¥ng trong Ä‘iá»u kiá»‡n Ä‘áº·c biá»‡t.
Pháº§n nÃ y giÃºp báº¡n hiá»ƒu rÃµ WP quyáº¿t Ä‘á»‹nh sá»­ dá»¥ng template nÃ o Ä‘á»ƒ táº¡o ra cÃ¡c trang cÃ¡ nhÃ¢n, tá»« Ä‘Ã³ hiá»ƒu rÃµ vÃ  quyáº¿t Ä‘á»‹nh chá»‰nh sá»­a cÃ¡c file cáº§n sá»­a.

NÃ³i 1 cÃ¡ch Ä‘Æ¡n giáº£n, Wordpress sáº½ tÃ¬m kiáº¿m thÃ´ng qua há»‡ thá»‘ng phÃ¢n cáº¥p template cho Ä‘áº¿n khi tÃ¬m tháº¥y file template phÃ¹ há»£p.

![WP hierarchy](/assets/img/Theme/wp_hierarchy.png)

[ğŸš§ğŸš§ Xem hÃ¬nh lá»›n hÆ¡n á»Ÿ Ä‘Ã¢y ğŸš§ğŸš§](https://wphierarchy.com/)

Qua sá»Ÿ Ä‘á»“, ta tháº¥y cÃ³ tá»•ng cá»™ng 7 nhÃ¡nh, cáº£ 6 trong 7 nhÃ¡nh Ä‘á»u liÃªn káº¿t vá»›i template index.php khi WP khÃ´ng tÃ¬m tháº¥y template nÃ o phÃ¹ há»£p.
DÆ°á»›i Ä‘Ã¢y lÃ  danh sÃ¡ch cÃ¡c template sáº½ render theo thá»© tá»± template.

**Trang Home**

Máº·c Ä‘á»‹nh trang Home sáº½ hiá»ƒn thá»‹ cÃ¡c bÃ i viáº¿t posts má»›i nháº¥t.

+ Template home.php Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ render trang blogs hiá»ƒn thá»‹ cÃ¡c bÃ i viáº¿t.
+ Template index.php sáº½ Ä‘Æ°á»£c thay tháº¿ Ä‘á»ƒ hiá»ƒn thá»‹ náº¿u nhÆ° WP khÃ´ng tÃ¬m tháº¥y template home.php

BÃªn dÆ°á»›i lÃ  thá»© tá»± Æ°u tiÃªn sá»­ dá»¥ng template mÃ  Wordpress quyáº¿t Ä‘á»‹nh sá»­ dá»¥ng:

```
home.php  ->  index.php
```


**Trang Front**

LÃ  trang hiá»ƒn thá»‹ Ä‘áº§u tiÃªn cÃºa site. Trang Front hiá»ƒn thá»‹ Ä‘Æ°á»£c cáº£ trang blogs vÃ  trang tÄ©nh.

+ Template front-page.php Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ render trang Front cá»§a site.
+ Template home.php Ä‘Æ°á»£c sá»­ dá»¥ng khi trang Front Ä‘Æ°á»£c thiáº¿t láº­p lÃ m "Your latest posts" á»Ÿ menu Settings > Reading,
vÃ  template front-page.php khÃ´ng tá»“n táº¡i.
+ Template page.php sáº½ Ä‘Æ°á»£c sá»­ dung náº¿ trang front-page Ä‘Æ°á»£c thiáº¿t láº­p lÃ m trang tÄ©nh, vÃ  Ä‘á»“ng thá»i template front-page.php khÃ´ng tá»“n táº¡i.
+Template index.php Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ hiá»ƒn thá»‹ trang front-page.php náº¿u template home.php / page.php khÃ´ng tá»“n táº¡i trong tá»«ng trÆ°á»ng há»£p.

Thá»© tá»± Æ°u tiÃªn template:

```
front-page.php   ->  home.php   ->  index.php
                 ->  page.php
```


**Trang Privacy Policy**

Trang hiá»ƒn thá»‹ thÃ´ng tin Privacy Policy cá»§a trang.

+ Template privacy-policy.php Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ render trang Privacy Policy.
+ Custom page template sáº½ Ä‘Æ°á»£c thay tháº¿ náº¿u khÃ´ng tÃ¬m tháº¥y template á»Ÿ trÃªn
+ Template page-{slug}.php
+ page-{id}.php
+ page.php
+ singular.php
+ index.php

Thá»© tá»± Æ°u tiÃªn template:

```
privacy-policy.php  ->  Custom page template  ->  page-{slug}.php  ->  page-{id}.php  ->  page.php  ->  singular.php  ->  index.php
```


**Single Post**

Wordpress sá»­ dá»¥ng template Ä‘á»ƒ render trang single post theo Ä‘Æ°á»ng dáº«n sau:

```
single-{post-type}-{slug}.php  ->  single-{post-type}.php  ->  single.php  ->  singular.php  ->  index.php
```


**Single Page**

Template hiá»ƒn thá»‹ trang tÄ©nh (post-type lÃ  "page"). WP sá»­ dá»¥ng template theo Ä‘Æ°á»ng dáº«n:

```
Custom page template  ->  page-{slug}.php  ->  page-{id}.php  ->  page.php  ->  singular.php  ->  index.php
```


**Category**

Template hiá»ƒn thá»‹ trang chá»‰ má»¥c lÆ°u trá»¯ Category. WP sá»­ dá»¥ng template theo Ä‘Æ°á»ng dáº«n:

```
category-{slug}.php  ->  category-{id}.php  ->  category.php  ->  archive.php  ->  index.php
```


**Tag**

Template hiá»ƒn thá»‹ trang chá»‰ má»¥c lÆ°u trá»¯ Tag. WP sá»­ dá»¥ng template theo Ä‘Æ°á»ng dáº«n:

```
tag-{slug}.php  ->  tag-{id}.php  ->  tag.php  ->  archive.php  ->  index.php
```


**Custom Taxonomies**

Template hiá»ƒn thá»‹ custom taxonomies.

```
taxonomy-{taxonomy}-{term}.php  -> taxonomy-{taxonomy}.php  ->  taxonomy.php  ->  archive.php  ->  index.php
```


**Custom Post Types**

Hiá»ƒn thá»‹ trang chá»‰ má»¥c lÆ°u trá»¯ cá»§a custom post types.

```
archive-{post-type}.php  ->  archive.php  ->  index.php
```


**Author**

Template hiá»ƒn thá»‹ thÃ´ng tin cá»§a tÃ¡c giáº£.

```
author-{nickname}.php  ->  author-{id}.php  ->  archive.php  ->  index.php
```


**Date**

Template hiá»ƒn thá»‹ trang lÆ°u trá»¯ theo ngÃ y.

```
date.php  ->  archive.php  ->  index.php
```


**Search**

Template hiá»ƒn thá»‹ káº¿t quáº£ tÃ¬m kiáº¿m cÃ¡c bÃ i viáº¿t.

```
search.php  ->  archive.php  ->  index.php
```


**404**

Template hiá»ƒn thá»‹ trang 404 - trang khÃ´ng tÃ¬m tháº¥y.

```
404.php  ->  index.php
```


**Attachment**
Template hiá»ƒn thá»‹ cÃ¡c Ä‘á»‹nh dáº¡ng post-type lÃ  "attachment" nhÆ° hÃ¬nh áº£nh, media.

```
{MIME-type}.php  ->  attachment.php  ->  single-attachment-{slug}.php  ->  single-attachment.php  ->  single.php  ->  singular.php  ->  index.php
```


## 3. THEME FUNCTIONS

File **`functions.php`** trong theme lÃ  nÆ¡i ta thÃªm nhá»¯ng tÃ­nh nÄƒng Ä‘áº·c trÆ°ng vÃ o theme. LÃ  nÆ¡i káº¿t ná»‘i giá»¯a cÃ¡c tÃ­nh nÄƒng cá»‘t lá»—i cá»§a Wordpress
Ä‘á»ƒ táº¡o ra cÃ¡c theme cÃ ng thÃªm mÃ´-Ä‘un, má»Ÿ rá»™ng vÃ  cÃ³ nhiá»u chá»©c nÄƒng hÆ¡n. Ta cÃ³ thá»ƒ xem nhÆ° functions.php lÃ  má»™t plugin Wordpress.

â– Sau Ä‘Ã¢y lÃ  pháº§n ná»™i dung cá»§a file functions.php vá»›i nhá»¯ng tÃ­nh nÄƒng vÃ  chá»©c nÄƒng Ä‘Æ¡n giáº£n:

+ Thiáº¿t láº­p cÃ¡c tÃ­nh nÄƒng cá»§a theme ngay khi Ä‘Æ°á»£c kÃ­ch hoáº¡t.
+ ÄÄƒng kÃ½ kháº£ nÄƒng Ä‘a ngÃ´n ngá»¯ cho theme.
+ ÄÄƒng kÃ½ tá»± Ä‘á»™ng táº¡o feed link.
+ Báº­t tÃ­nh nÄƒng thumbnail vÃ  feature images cho bÃ i viáº¿t post.
+ ThÃªm custom navigation menu.
+ Báº­t há»— trá»£ cÃ¡c format cho bÃ i váº¿t post.

``` php
if ( ! function_exists( 'myfirsttheme_setup' ) ) :
/**
 * Thiáº¿t láº­p theme máº·c Ä‘á»‹nh vÃ  cÃ¡c tÃ­nh nÄƒng Ä‘áº·c trÆ°ng cá»­a Wordpress cho theme.
 * Ghi chÃº: pháº§n function nÃ y sáº½ hook vÃ o "after_setup_theme" hook, thay cho "init" hook.
 * Init hook Ä‘Ã£ quÃ¡ trá»… Ä‘á»ƒ há»— trá»£ cÃ¡c tÃ­nh nÄƒng má»›i trong Wordpress.
 */
function myfirsttheme_setup() {
    /**
     * ÄÄƒng kÃ­ há»— trá»£ Ä‘a ngÃ´n ngá»¯ cho theme.
     * CÃ¡c ngÃ´n ngá»¯ Ä‘Æ°á»£c dá»‹ch náº±m á»Ÿ folder /languagues/
     */
    load_theme_textdomain( 'myfirsttheme', get_template_directory() . '/languages' );
    /**
     * ThÃªm tÃ­nh nÄƒng RSS feed cho cÃ¡c bÃ i viáº¿t post vÃ  comment á»Ÿ tag <head>
     */
    add_theme_support( 'automatic-feed-links' );
    /**
     * Báº­t há»— trá»£ tÃ­nh nÄƒng thumbnail vÃ  featured images cho bÃ i viáº¿t post.
     */
    add_theme_support( 'post-thumbnails' );
    /**
     * Add support for two custom navigation menus.
     * ThÃªm 2 custom navigation menu.
     */
    register_nav_menus( array(
        'primary'   => __( 'Primary Menu', 'myfirsttheme' ),
        'secondary' => __('Secondary Menu', 'myfirsttheme' )
    ) );
    /**
     * Báº­t há»— trá»£ cÃ¡c format cho bÃ i viáº¿t post:
     * aside, gallery, quote, image, and video
     */
    add_theme_support( 'post-formats', array ( 'aside', 'gallery', 'quote', 'image', 'video' ) );
}
endif; // myfirsttheme_setup
add_action( 'after_setup_theme', 'myfirsttheme_setup' );
```


â–â–â– **Nhá»¯ng tÃ­nh nÄƒng / chá»©c nÄƒng sá»­ dá»¥ng thÆ°á»ng xuyÃªn trong theme** â–â–â–

âœ± **Thay Ä‘á»•i Logo**

Há»— trá»£ ngÆ°á»i sá»­ dá»¥ng thay Ä‘á»•i Logo cá»§a trang web má»™t cÃ¡ch trá»±c quan trÃªn trang Admin.

Pháº§n thiáº¿t láº­p nÃ y sáº½ bao gá»“m 2 pháº§n chá»§ yáº¿u:

+ ÄÄƒng kÃ½ custom logo trong functions.php
+ Hiá»ƒn thá»‹ custom logo trong template file.

â–¶ï¸ **ÄÄƒng kÃ½ custom logo**

ÄÄƒng kÃ½ custom logo thÃ´ng qua function add_theme_support()

``` php
function themename_custom_logo_setup() {
    $defaults = array(
        'height'               => 100,
        'width'                => 400,
        'flex-height'          => true,
        'flex-width'           => true,
        'header-text'          => array( 'site-title', 'site-description' ),
        'unlink-homepage-logo' => true, 
    );
 
    add_theme_support( 'custom-logo', $defaults );
}
add_action( 'after_setup_theme', 'themename_custom_logo_setup' );
```

- `height` : chiá»u cao mong muá»‘n cá»§a logo, Ä‘Æ¡n vá»‹ lÃ  px.
- `width` : chiá»u dÃ i mong muá»‘n cá»§a logo, Ä‘Æ¡n vá»‹ lÃ  px.
- `flex-height` : cho phÃ©p chiá»u cao linh hoáº¡t.
- `flex-width` : cho phÃ©p chiá»u dÃ i linh hoáº¡t.
- `header-text` : ....
- `unlink-homepage-logo` : máº·c Ä‘á»‹nh logo sáº½ bao bá»c bá»Ÿi má»™t Ä‘Æ°á»ng link dáº«n tá»›i trang Home, náº¿u option nÃ y Ä‘Æ°á»£c thiáº¿t láº­p lÃ  true, custom logo sáº½ khÃ´ng cÃ²n Ä‘Æ°á»ng link ná»¯a.


â–¶ï¸ **Hiá»ƒn thá»‹ custom logo trÃªn template file**

BÆ°á»›c trÃªn chá»‰ lÃ  Ä‘Äƒng kÃ½, Ä‘á»ƒ hiá»ƒn thá»‹ custom logo trÃªn template file, ta cáº§n sá»­ dá»¥ng template tag the_custom_logo() 

``` php
if ( function_exists( 'the_custom_logo' ) ) {
    the_custom_logo();
}
```


## 4. CONDITION TAGS

Condition tags Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ kiá»ƒm tra 1 Ä‘áº·c tÃ­nh nÃ o Ä‘Ã³ Ä‘Ãºng hay sai.
ThÆ°á»ng káº¿t há»£p vá»›i if / else Ä‘á»ƒ thá»±c hiá»‡n bá»™ mÃ£ lá»‡nh Ä‘áº§u tiÃªn (náº¿u Ä‘Ãºng), hoáº·c thá»±c hiá»‡n bá»™ mÃ£ lá»‡nh thá»© 2 (náº¿u sai).

Danh sÃ¡ch condition tags thÆ°á»ng hay sá»­ dá»¥ng:

- **`is_home()`** : kiá»ƒm tra trang hiá»‡n táº¡i cÃ³ pháº£i lÃ  trang Home khÃ´ng
- **`is_front_page()`** : kiá»ƒm tra trang hiá»‡n táº¡i cÃ³ pháº£i lÃ  trang Front khÃ´ng.
- **`is_admin()`** : kiá»ƒm tra cÃ³ pháº£i Ä‘ang á»Ÿ trang Admin (Dashboard)
- **`is_single()`** : kiá»ƒm tra trang hiá»‡n táº¡i cÃ³ pháº£i lÃ  single post khÃ´ng.
- **`is_singular()`** : kiá»ƒm trang trang hiá»‡n táº¡i cÃ³ pháº£i lÃ  post-type "post", "page", "attachment" hay khÃ´ng.
- **`is_sticky()`** : kiá»ƒm tra bÃ i viáº¿t post hiá»‡n táº¡i cÃ³ Ä‘Æ°á»£c check vÃ o há»™p kiá»ƒm "Stick to the top of the blog" khÃ´ng.
- **`is_page()`** : kiá»ƒm tra trang hiá»‡n táº¡i lÃ  trang tÄ©nh, cÃ³ kiá»ƒu post-type lÃ  "page"
- **`is_page_template()`** : kiá»ƒm tra trang tÄ©nh cÃ³ Ä‘ang sá»­ dá»¥ng page template khÃ´ng.
- **`is_category()`** : kiá»ƒm tra trang hiá»‡n táº¡i cÃ³ pháº£i lÃ  trang lÆ°u trá»¯ category khÃ´ng.
- **`is_tag()`** : kiá»ƒm tra trang hiá»‡n táº¡i cÃ³ pháº£i tÃ  trang lÆ°u trá»¯ tag khÃ´ng
- **`is_tax()`** : kiá»ƒm tra trang hiá»‡n táº¡i cÃ³ pháº£i lÃ  trang lÆ°u trá»¯ taximony khÃ´ng.
- **`is_author()`** : kiá»ƒm tra trang hiá»‡n táº¡i cÃ³ pháº£i lÃ  trang tÃ¡c giáº£.
- **`is_archive()`** : kiá»ƒm tra trang hiá»‡n táº¡i cÃ³ pháº£i lÃ  trang lÆ°u trá»¯ hay khÃ´ng.
- **`is_search()`** : kiá»ƒm tra trang hiá»‡n táº¡i cÃ³ pháº£i trang hiáº»n thá»‹ káº¿t quáº£ tÃ¬m kiáº¿m hay khÃ´ng.
- **`is_404()`** : kiá»ƒm tra trang hiá»‡n táº¡i cÃ³ pháº£i lÃ  trang 404 khÃ´ng.
- **`is_privacy_policy()`** : kiá»ƒm tra trang hiá»‡n táº¡i cÃ³ pháº£i lÃ  trang Privacy Policy hay khÃ´ng.
